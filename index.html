<!DOCTYPE html>
<html>
  <head>
    <title>Load Test Monitor</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="navbar">
      <div class="nav-links">
        <a id="navHome" class="active">Home</a>
        <a id="navReports">Reports</a>
        <a id="navSettings">Settings</a>
      </div>
      <div class="logo">
        <img src="assets/long-logo.png" alt="Samaa Aerospace Logo" />
      </div>
    </div>
    <div id="homePage" class="page active">
      <h1>LOAD TEST MONITOR</h1>
      <!-- ðŸ“Œ Form Section -->

      <form id="masterCalibrationForm">
        <h3>MASTER CALIBRATION EQUIPMENT</h3>

        <label
          >LOAD CELL PART NO.<input type="text" name="loadCellPartNo" required
        /></label>
        <label
          >LOAD CELL SERIAL NO.<input
            type="text"
            name="loadCellSerialNo"
            required
        /></label>
        <label
          >LOAD CELL MODEL NO.<input
            type="text"
            name="loadCellModelNo"
            required
        /></label>
        <label
          >LOAD CELL LAST CALIBRATION DATE<input
            type="date"
            name="loadCellLastCalibrationDate"
            required
        /></label>
        <label
          >LOAD CELL CALIBRATION VALID UPTO<input
            type="date"
            name="loadCellCalibrationValidity"
            required
        /></label>
        <label
          >DISPLAY PART NO.<input type="text" name="displayPartNo" required
        /></label>
        <label
          >DISPLAY MODEL NO.<input type="text" name="displayModelNo" required
        /></label>
        <label
          >DISPLAY SERIAL NO.<input type="text" name="displaySerialNo" required
        /></label>
        <label
          >DISPLAY LAST CALIBRATION DATE<input
            type="date"
            name="displayLastCalibrationDate"
            required
        /></label>
        <label
          >DISPLAY CALIBRATION VALID UPTO<input
            type="date"
            name="displayCalibrationValidity"
            required
        /></label>
      </form>
      <button id="saveCalibrationButton" type="button">
        Save Master Calibration Data
      </button>

      <form id="equipmentTestForm">
        <!-- Master Equipment -->

        <!-- Tested Equipment -->
        <h3>EQUIPMENT TESTED</h3>
        <label
          >EQUIPMENT<input type="text" name="equipmentName" required
        /></label>
        <label
          >TYPE OF EQUIPMENT<input type="text" name="typeOfEquipment" required
        /></label>
        <label
          >EQUIPMENT PART NO.<input type="text" name="equipmentPartNo" required
        /></label>
        <label
          >EQUIPMENT MODEL NO.<input
            type="text"
            name="equipmentModelNo"
            required
        /></label>
        <label
          >EQUIPMENT SERIAL NO.<input
            type="text"
            name="equipmentSerialNo"
            required
        /></label>
        <label
          >RATED LOAD CAPACITY<input
            type="number"
            name="ratedLoadCapacity"
            required
        /></label>
        <label
          >PROOF LOAD PERCENTAGE<input
            type="number"
            name="proofLoadPercentage"
            required
        /></label>
        <label>
          YEAR OF MANUFACTURE
          <input type="number" name="yearOfManufacture" required />
        </label>
        <label>LOCATION<input type="text" name="location" required /></label>
        <!-- <label>Test Date<input type="date" name="testDate" required /></label> -->

        <!-- Personnel -->
        <h3>CERTIFICATION</h3>
        <label>TESTED BY<input type="text" name="testedBy" required /></label>
        <label
          >CERTIFIED BY<input type="text" name="certifiedBy" required
        /></label>
        <!-- <button id="saveMetadataButton">Save Data</button> -->
      </form>
      <!-- <button id="saveMetadataButton" type="button">Save Data</button> -->
      <button id="saveEquipmentButton" type="button">
        Save Equipment Data
      </button>

      <div id="controlButtons">
        <!-- CHANGE: added serial port dropdown before buttons -->
        <select id="serialPortSelect">
          <option value="">Select Serial Port</option>
          <!-- dynamically populated -->
        </select>
        <button id="startButton">Start Load Test</button>
        <button id="stopButton">Stop Load Test</button>
        <button id="downloadButton">Download Report</button>
        <button id="clearDataButton">Clear Data</button>
      </div>
      <h2
        style="
          color: #0a3a71;
          font-weight: 600;
          margin: 10px auto 5px auto;
          font-size: 18px;
        "
      >
        LIVE LOAD DATA
      </h2>
      <div id="controlPanelContainer">
        <!-- CHANGE: only control + table here -->
        <div id="statusCards">
          <div id="loadValue">0.000 t / 0.00 kN</div>
          <div id="peakDisplay">Peak Load: 0.000 t</div>
          <div id="proofLoadDisplay">Proof Load: -- t</div>
          <div id="lastTimestamp">Last Update: --</div>
          <div id="status">Status: Disconnected</div>
        </div>

        <div id="logWrapper">
          <table id="dataTable">
            <thead>
              <tr>
                <th>TIMESTAMP</th>
                <th>LOAD (t)</th>
                <th>LOAD (kN)</th>
              </tr>
            </thead>
            <tbody id="dataTableBody"></tbody>
          </table>
        </div>
      </div>

      <canvas id="loadChart" width="800" height="300"></canvas>
      <!-- CHANGE: now below and full width -->
    </div>

    <div id="reportsPage" class="page">
      <h2>Reports</h2>
      <p>View and download previous test reports here.</p>
      <!-- Future report list will appear here -->
    </div>

    <!-- SETTINGS PAGE -->
    <div id="settingsPage" class="page">
      <h2>Settings</h2>
      <form id="settingsForm">
        <label>
          Company Name:
          <input
            type="text"
            name="companyName"
            id="companyNameInput"
            required
          />
        </label>
        <label>
          Upload Logo:
          <input type="file" id="logoUploadInput" accept="image/*" />
        </label>
        <button type="submit" id="saveSettingsButton">Save Settings</button>
      </form>
      <div id="logoPreviewContainer">
        <h4>Logo Preview:</h4>
        <img
          id="logoPreview"
          src=""
          alt="Logo Preview"
          style="max-width: 200px; max-height: 200px"
        />
      </div>
      <!-- Future settings form will appear here -->
    </div>

    <!-- <img src="assets/logo.png" alt="SAMAA Aerospace Logo" /> -->

    <script src="./renderer.js"></script>

    <script>
      // PAGE SWITCHING
      function showPage(pageId) {
        document
          .querySelectorAll('.page')
          .forEach((page) => page.classList.remove('active'))
        document.getElementById(pageId).classList.add('active')

        document
          .querySelectorAll('.nav-links a')
          .forEach((link) => link.classList.remove('active'))
        if (pageId === 'homePage')
          document.getElementById('navHome').classList.add('active')
        if (pageId === 'reportsPage')
          document.getElementById('navReports').classList.add('active')
        if (pageId === 'settingsPage')
          document.getElementById('navSettings').classList.add('active')
      }

      document
        .getElementById('navHome')
        .addEventListener('click', () => showPage('homePage'))
      document
        .getElementById('navReports')
        .addEventListener('click', () => showPage('reportsPage'))
      document
        .getElementById('navSettings')
        .addEventListener('click', () => showPage('settingsPage'))
    </script>
  </body>
</html>
